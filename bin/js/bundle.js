var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */
const Game_1 = require("./script/Game");
const Ball_1 = require("./script/Ball");
const GameControl_1 = require("./script/GameControl");
const Player_1 = require("./script/Player");
/*
* 游戏初始化配置;
*/
class GameConfig {
    constructor() { }
    static init() {
        var reg = Laya.ClassUtils.regClass;
        reg("script/Game.ts", Game_1.default);
        reg("script/Ball.ts", Ball_1.default);
        reg("script/GameControl.ts", GameControl_1.default);
        reg("script/Player.ts", Player_1.default);
    }
}
GameConfig.width = 1136;
GameConfig.height = 640;
GameConfig.scaleMode = "fixedauto";
GameConfig.screenMode = "horizontal";
GameConfig.alignV = "top";
GameConfig.alignH = "left";
GameConfig.startScene = "game/Game.scene";
GameConfig.sceneRoot = "";
GameConfig.debug = false;
GameConfig.stat = true;
GameConfig.physicsDebug = false;
GameConfig.exportSceneToJson = true;
exports.default = GameConfig;
GameConfig.init();

},{"./script/Ball":3,"./script/Game":4,"./script/GameControl":5,"./script/Player":6}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const GameConfig_1 = require("./GameConfig");
class Main {
    constructor() {
        //根据IDE设置初始化引擎		
        if (window["Laya3D"])
            Laya3D.init(GameConfig_1.default.width, GameConfig_1.default.height);
        else
            Laya.init(GameConfig_1.default.width, GameConfig_1.default.height, Laya["WebGL"]);
        Laya["Physics"] && Laya["Physics"].enable();
        Laya["DebugPanel"] && Laya["DebugPanel"].enable();
        Laya.stage.scaleMode = GameConfig_1.default.scaleMode;
        Laya.stage.screenMode = GameConfig_1.default.screenMode;
        //兼容微信不支持加载scene后缀场景
        Laya.URL.exportSceneToJson = GameConfig_1.default.exportSceneToJson;
        //打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
        if (GameConfig_1.default.debug || Laya.Utils.getQueryString("debug") == "true")
            Laya.enableDebugPanel();
        if (GameConfig_1.default.physicsDebug && Laya["PhysicsDebugDraw"])
            Laya["PhysicsDebugDraw"].enable();
        if (GameConfig_1.default.stat)
            Laya.Stat.show();
        Laya.alertGlobalError = true;
        //激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
        Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
    }
    onVersionLoaded() {
        //激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
        Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
    }
    onConfigLoaded() {
        //加载IDE指定的场景
        GameConfig_1.default.startScene && Laya.Scene.open(GameConfig_1.default.startScene);
    }
}
//激活启动类
new Main();

},{"./GameConfig":1}],3:[function(require,module,exports){
'use strict';
Object.defineProperty(exports, "__esModule", { value: true });
const Game_1 = require("./Game");
const initialPositionWhite = new Laya.Point(140, 208);
/**
 * 子弹脚本，实现子弹飞行逻辑及对象池回收机制
 */
class Ball extends Laya.Script {
    constructor() {
        super();
        this.isInitialized = false;
    }
    onEnable() {
        if (!this.isInitialized) {
            // 测试时候没有皮肤, 用的白球 + 数字
            // if (this.number) {
            //     const label: Laya.Label = this.owner.getChildByName('label') as Laya.Label;
            //     label.text = `${this.number}`;
            // }
            Object.defineProperty(this.owner, 'startMove', {
                enumerable: false,
                value(xForce, yForce) {
                    var rig = this.getComponent(Laya.RigidBody);
                    rig.setVelocity({ x: xForce, y: yForce });
                    // 因为 game 里是个定时器, 所以存在刚点白球的时候连击可以多次击球的问题
                    Game_1.default.instance.isBallRunning = true;
                },
            });
            this.isInitialized = true;
        }
    }
    onDisable() { }
    onUpdate() {
        const owner = this.owner;
        const { x, y } = owner;
        const { startX, startY, endX, endY, middle, middleLeft, middleRight } = Game_1.default.instance.getCollisionCoordinate();
        const rig = this.owner.getComponent(Laya.RigidBody);
        const { x: currentX, y: currentY } = rig.linearVelocity;
        // 球最后零点几的位移基本看不出来了, 这时候再继续等待实在是太智障了
        if (3 > x && -3 < x && 3 > y && -3 < y) {
            // 因为这个都是碰撞操作, 所以一般不太可能出现非线性降速, 应该都能触发这个东西
            if (0 !== x && 0 !== y) {
                rig.setVelocity({ x: 0, y: 0, });
                // if (Game.instance.ballRunning[this.number]) {
                //     Game.instance.ballRunning[this.number] = false;
                // }
            }
        }
        else {
            // 只有是非动状态才会置为动
            // if (!Game.instance.ballRunning[this.number]) {
            //     Game.instance.ballRunning[this.number] = true;
            // }
        }
        if (x < startX) {
            if (y < startY) {
                if (22 > Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2))) {
                    console.log('左上洞');
                    this.handlerGoal();
                }
            }
            else if (y > endY) {
                if (22 > Math.sqrt((Math.pow((22 - (startX - x)), 2)) +
                    (Math.pow((22 - (y - endY)), 2)))) {
                    console.log('左下洞');
                    this.handlerGoal();
                }
            }
        }
        else if (x > endX) {
            if (y < startY) {
                if (22 > Math.sqrt((Math.pow((22 - (x - endX)), 2)) +
                    (Math.pow((22 - (startY - y)), 2)))) {
                    console.log('右上洞');
                    this.handlerGoal();
                }
            }
            else if (y > endY) {
                if (22 > Math.sqrt((Math.pow((22 - (x - endX)), 2)) +
                    (Math.pow((22 - (y - endY)), 2)))) {
                    console.log('右下洞');
                    this.handlerGoal();
                }
            }
        }
        else if (y < startY) {
            if (x > middleLeft && x < middleRight) {
                if (22 > Math.sqrt((Math.pow((x - middle), 2)) +
                    (Math.pow((22 - (startY - y)), 2)))) {
                    console.log('中上洞');
                    this.handlerGoal();
                }
            }
        }
        else if (y > endY) {
            if (x > middleLeft && x < middleRight) {
                if (22 > Math.sqrt((Math.pow((x - middle), 2)) +
                    (Math.pow((22 - (y - endY)), 2)))) {
                    console.log('中下洞');
                    this.handlerGoal();
                }
            }
        }
        // 其他情况就是在桌子中间了
    }
    handlerGoal() {
        // if (0 === this.number) {
        //     console.log('白球进了');
        //     (this.owner as Laya.Sprite).pos(initialPositionWhite.x, initialPositionWhite.y);
        // } else {
        //     console.log('进球！', this.number);
        //     // TODO 要计算下下方计分区位置在哪
        //     this.owner.removeSelf();
        //     const containerGoal = Game.instance.container_goal.addChild(this.owner);
        // }
        // Game.instance.event('ball.goal', this.number);
        Game_1.default.instance.handlerGoal(this.number);
    }
}
exports.default = Ball;

},{"./Game":4}],4:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const layaMaxUI_1 = require("./../ui/layaMaxUI");
const GameControl_1 = require("./GameControl");
class Game extends layaMaxUI_1.ui.game.GameUI {
    constructor() {
        super();
        // ballRunning: { [key: string]: boolean } = {
        //     0: false,
        //     1: false,
        //     2: false,
        //     3: false,
        //     4: false,
        //     5: false,
        //     6: false,
        //     7: false,
        //     8: false,
        //     9: false,
        //     10: false,
        //     11: false,
        //     12: false,
        //     13: false,
        //     14: false,
        //     15: false,
        // };
        this._ballsRigid = {
            0: undefined,
            1: undefined,
            2: undefined,
            3: undefined,
            4: undefined,
            5: undefined,
            6: undefined,
            7: undefined,
            8: undefined,
            9: undefined,
            10: undefined,
            11: undefined,
            12: undefined,
            13: undefined,
            14: undefined,
            15: undefined,
        };
        this._isBallRunning = false;
        Game.instance = this;
    }
    /**
     * 这个 get set 写的有点傻, 本来以为只需要写 get 的
     */
    get isBallRunning() {
        return this._isBallRunning;
    }
    set isBallRunning(val) {
        this._isBallRunning = val;
    }
    onEnable() {
        this._control = this.getComponent(GameControl_1.default);
        this._containerGoal = this.getChildByName('container_goal');
        const containerBall = this._containerBall = this.getChildByName('container_ball');
        this._startX = 0;
        this._startY = 0;
        this._endX = containerBall.width;
        this._endY = containerBall.height;
        this._middle = containerBall.width / 2;
        this._middleLeft = containerBall.width / 2 - 22;
        this._middleRight = containerBall.width / 2 + 22;
        this._startX += 22;
        this._startY += 22;
        this._endX -= 22;
        this._endY -= 22;
        // this.showRect();
        let tempBall = containerBall.getChildByName('ball_white');
        if (tempBall) {
            this._ballsRigid[0] = tempBall.getComponent(Laya.RigidBody);
        }
        for (let i = 1, l = 16; i < l; ++i) {
            tempBall = containerBall.getChildByName(`ball_${10 > i ? `0${i}` : i}`);
            if (tempBall) {
                this._ballsRigid[i] = tempBall.getComponent(Laya.RigidBody);
            }
            else {
                this._ballsRigid[i] = undefined;
            }
        }
        // 反正这个是判断有没有在动的, 跟着帧走应该差不多
        // 一秒一次某些时候等待太久
        Laya.timer.frameLoop(30, this, this.calculateBallStatue);
    }
    onDisable() {
        Laya.timer.clear(this, this.calculateBallStatue);
    }
    calculateBallStatue() {
        let isRunning = false;
        for (let key of Object.keys(this._ballsRigid)) {
            if (this._ballsRigid[key]) {
                const { x: currentX, y: currentY } = this._ballsRigid[key].linearVelocity;
                if (currentX && currentY) {
                    isRunning = true;
                }
            }
        }
        // 当所有球停止运动的时候, 触发个事件给外面
        if (this._isBallRunning && !isRunning) {
            this.event('ball.all.stop');
        }
        this._isBallRunning = isRunning;
    }
    getCollisionCoordinate() {
        return {
            startX: this._startX,
            startY: this._startY,
            endX: this._endX,
            endY: this._endY,
            middle: this._middle,
            middleLeft: this._middleLeft,
            middleRight: this._middleRight,
        };
    }
    /**
     * 展示碰撞框
     */
    showRect() {
        const line = new Laya.Sprite();
        line.graphics.drawRect(this._middle, 0, 2, 500, '#ff0000');
        line.graphics.drawRect(this._middleLeft, 0, 2, 500, '#ff0000');
        line.graphics.drawRect(this._middleRight, 0, 2, 500, '#ff0000');
        line.graphics.drawRect(this._startX, 0, 2, 500, '#ff0000');
        line.graphics.drawRect(this._endX, 0, 2, 500, '#ff0000');
        line.graphics.drawRect(0, this._startY, 900, 2, '#ff0000');
        line.graphics.drawRect(0, this._endY, 900, 2, '#ff0000');
        this.addChild(line);
    }
}
exports.default = Game;

},{"./../ui/layaMaxUI":7,"./GameControl":5}],5:[function(require,module,exports){
'use strict';
Object.defineProperty(exports, "__esModule", { value: true });
const Player_1 = require("./Player");
const initialPositionWhite = new Laya.Point(140, 208);
// 进球后在下方展示区域是否将角度回正 (我感觉不回正也挺好看的)
const isGoalRotationReset = true;
/**
 * 游戏控制脚本。定义了几个dropBox，bullet，createBoxInterval等变量，能够在IDE显示及设置该变量
 * 更多类型定义，请参考官方文档
 */
class GameControl extends Laya.Script {
    constructor() {
        super();
        this._goal = {
            1: false,
            2: false,
            3: false,
            4: false,
            5: false,
            6: false,
            7: false,
            8: false,
            9: false,
            10: false,
            11: false,
            12: false,
            13: false,
            14: false,
            15: false,
        };
        this._flags = {
            goalThisTurn: [],
        };
    }
    onEnable() {
        this._containerBall = this.owner.getChildByName("container_ball");
        this._playerLeft = this.owner.getChildByName('player_left');
        this._playerRight = this.owner.getChildByName('player_right');
        this.addListeners();
    }
    onDisable() {
        this.removeListeners();
    }
    onStageClick(e) {
        //停止事件冒泡，提高性能，当然也可以不要
        e.stopPropagation();
        // 如果球在动, 就不让继续击球了
        if (this.owner.isBallRunning) {
            return;
        }
        // 这个是随机方向生成, 最早开发的时候用的, 现在早就用不到了
        // const x: number = (.5 < Math.random() ? 1 : -1) * Math.random() * 10;
        // const y: number = (.5 < Math.random() ? 1 : -1) * Math.random() * 10;
        let ball = this._containerBall.getChildByName('ball_white');
        const parent = ball.parent;
        const touchX = e.stageX;
        const touchY = e.stageY;
        const ballX = ball.x + parent.x;
        const ballY = ball.y + parent.y;
        const x = (touchX - ballX) / 20;
        const y = (touchY - ballY) / 20;
        // 这个是开发时用来判断点击位置和球运行方向用的, 现在已经算好了, 就先隐藏, 以后调试可以继续用
        // console.log(touchX, touchY, ballX, ballY, x, y);
        ball.startMove(x, y);
    }
    addListeners() {
        // this.owner.on('ball.goal', this, this.handlerGoal);
        // 因为使用事件系统会导致进球判定变成异步且会重入, 因而在这里改成了直接把函数定义上去的方法
        Object.defineProperty(this.owner, 'handlerGoal', {
            enumerable: false,
            value: (number) => this.handlerGoal(number),
        });
        this.owner.on('ball.all.stop', this, this.judgeShot);
    }
    removeListeners() {
        // this.owner.off('ball.goal', this, this.handlerGoal);
        Object.defineProperty(this.owner, 'handlerGoal', {
            enumerable: false,
        });
        this.owner.off('ball.all.stop', this, this.judgeShot);
    }
    handlerGoal(number) {
        if (0 === number) {
            console.log('白球进了');
            this._containerBall.getChildByName('ball_white').pos(initialPositionWhite.x, initialPositionWhite.y);
        }
        else if (!this._goal[number]) {
            console.log('进球！', number);
            this._goal[number] = true;
            // TODO 要计算下下方计分区位置在哪
            const ballName = `ball_${10 > number ? `0${number}` : number}`;
            const ball = this._containerBall.getChildByName(ballName);
            // 这个 removeSelf 除了直接写在 ball 里面, 否则都会因为时序问题执行多次, 这里为了代码好看, 多写了防重入逻辑
            ball.removeSelf();
            ball.pos(40 * (number - 1) + 30, 25);
            isGoalRotationReset && (ball.rotation = 0);
            this.owner.container_goal.addChild(ball);
        }
        this._flags.goalThisTurn.push(number);
    }
    judgeShot() {
        const goalThisTurn = this._flags.goalThisTurn;
        if (goalThisTurn.length) {
            if (-1 < goalThisTurn.indexOf(0)) {
                // TODO
                // 可能需要罚杆？
                // 是不是进球全不算？
            }
            if (-1 < goalThisTurn.indexOf(8)) {
                // TODO 8 号球进了怎么算
            }
            if (-1 < goalThisTurn.findIndex((number) => 0 !== number && 8 !== number)) {
                const playerLeft = this._playerLeft.getComponent(Player_1.default);
                const playerRight = this._playerRight.getComponent(Player_1.default);
                if (undefined === playerLeft.target && undefined === playerRight.target) {
                    // this._playerCurrent
                    const firstBall = goalThisTurn.find((number) => 0 !== number && 8 !== number);
                    if ((0 === this._playerCurrent && 8 > firstBall) || (1 === this._playerCurrent && 8 < firstBall)) {
                        // 左玩家进了整球, 或者右玩家进了半球, 就是左整右半
                        playerLeft.target = 0;
                        playerRight.target = 1;
                    }
                    else {
                        // 否则就是左半右整
                        playerLeft.target = 1;
                        playerRight.target = 0;
                    }
                }
            }
            this._flags.goalThisTurn = [];
        }
        this._playerCurrent = 0 === this._playerCurrent ? 1 : 0;
    }
}
exports.default = GameControl;

},{"./Player":6}],6:[function(require,module,exports){
'use strict';
Object.defineProperty(exports, "__esModule", { value: true });
class Player extends Laya.Script {
    get target() {
        return this._target;
    }
    set target(val) {
        this._target = val;
        console.log('target', val);
        if (0 === val) {
            // (this.owner.getChildByName('container_ball') as Laya.Sprite).texture = 'game/balls/ball_01.png';
            this.owner.getChildByName('target').skin = 'game/balls/ball_01.png';
        }
        else if (1 === val) {
            this.owner.getChildByName('target').skin = 'game/balls/ball_09.png';
        }
    }
    constructor() {
        super();
    }
    onEnable() {
        const elName = this.owner.getChildByName('name');
        const elAvatar = this.owner.getChildByName('avatar');
        const elMask = new Laya.Sprite();
        // 注意, arcTo 的端点 1 是两端点位置切线的交点
        var path = [
            ["moveTo", 10, 0],
            ['lineTo', 40, 0],
            ["arcTo", 50, 0, 50, 10, 10],
            ['lineTo', 50, 40],
            ["arcTo", 50, 50, 40, 50, 10],
            ['lineTo', 10, 50],
            ["arcTo", 0, 50, 0, 40, 10],
            ['lineTo', 0, 10],
            ["arcTo", 0, 0, 10, 0, 10],
        ];
        elMask.graphics.drawPath(0, 0, path, { fillStyle: '#ff0000' });
        elMask.pos(0, 0);
        // this.owner.addChild(elMask);
        elAvatar.mask = elMask;
        if (this.avatar) { }
    }
}
exports.default = Player;

},{}],7:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var ui;
(function (ui) {
    var game;
    (function (game) {
        class GameUI extends Laya.Scene {
            constructor() { super(); }
            createChildren() {
                super.createChildren();
                this.loadScene("game/Game");
            }
        }
        game.GameUI = GameUI;
        class HoleUI extends Laya.View {
            constructor() { super(); }
            createChildren() {
                super.createChildren();
                this.loadScene("game/Hole");
            }
        }
        game.HoleUI = HoleUI;
    })(game = ui.game || (ui.game = {}));
})(ui = exports.ui || (exports.ui = {}));

},{}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL0FwcGxpY2F0aW9ucy9MYXlhQWlySURFLmFwcC9Db250ZW50cy9SZXNvdXJjZXMvYXBwL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvR2FtZUNvbmZpZy50cyIsInNyYy9NYWluLnRzIiwic3JjL3NjcmlwdC9CYWxsLnRzIiwic3JjL3NjcmlwdC9HYW1lLnRzIiwic3JjL3NjcmlwdC9HYW1lQ29udHJvbC50cyIsInNyYy9zY3JpcHQvUGxheWVyLnRzIiwic3JjL3VpL2xheWFNYXhVSS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNWQSxnR0FBZ0c7QUFDaEcsd0NBQWdDO0FBQ2hDLHdDQUFnQztBQUNoQyxzREFBOEM7QUFDOUMsNENBQW9DO0FBQ3BDOztFQUVFO0FBQ0Y7SUFhSSxnQkFBYyxDQUFDO0lBQ2YsTUFBTSxDQUFDLElBQUk7UUFDUCxJQUFJLEdBQUcsR0FBYSxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQztRQUM3QyxHQUFHLENBQUMsZ0JBQWdCLEVBQUMsY0FBSSxDQUFDLENBQUM7UUFDM0IsR0FBRyxDQUFDLGdCQUFnQixFQUFDLGNBQUksQ0FBQyxDQUFDO1FBQzNCLEdBQUcsQ0FBQyx1QkFBdUIsRUFBQyxxQkFBVyxDQUFDLENBQUM7UUFDekMsR0FBRyxDQUFDLGtCQUFrQixFQUFDLGdCQUFNLENBQUMsQ0FBQztJQUNuQyxDQUFDOztBQW5CTSxnQkFBSyxHQUFRLElBQUksQ0FBQztBQUNsQixpQkFBTSxHQUFRLEdBQUcsQ0FBQztBQUNsQixvQkFBUyxHQUFRLFdBQVcsQ0FBQztBQUM3QixxQkFBVSxHQUFRLFlBQVksQ0FBQztBQUMvQixpQkFBTSxHQUFRLEtBQUssQ0FBQztBQUNwQixpQkFBTSxHQUFRLE1BQU0sQ0FBQztBQUNyQixxQkFBVSxHQUFLLGlCQUFpQixDQUFD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QUFLLEVBQUUsQ0FBQSxDQUFBLENBQUM7WUFDdkIsY0FBYztnQkFDVixLQUFLLENBQUMsY0FBYyxFQUFFLENBQUM7Z0JBQ3ZCLElBQUksQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDaEMsQ0FBQztTQUNKO1FBTlksV0FBTSxTQU1sQixDQUFBO0lBQ0wsQ0FBQyxFQWxCZ0IsSUFBSSxHQUFKLE9BQUksS0FBSixPQUFJLFFBa0JwQjtBQUFELENBQUMsRUFsQmEsRUFBRSxHQUFGLFVBQUUsS0FBRixVQUFFLFFBa0JmIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIi8qKlRoaXMgY2xhc3MgaXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgYnkgTGF5YUFpcklERSwgcGxlYXNlIGRvIG5vdCBtYWtlIGFueSBtb2RpZmljYXRpb25zLiAqL1xyXG5pbXBvcnQgR2FtZSBmcm9tIFwiLi9zY3JpcHQvR2FtZVwiXG5pbXBvcnQgQmFsbCBmcm9tIFwiLi9zY3JpcHQvQmFsbFwiXG5pbXBvcnQgR2FtZUNvbnRyb2wgZnJvbSBcIi4vc2NyaXB0L0dhbWVDb250cm9sXCJcbmltcG9ydCBQbGF5ZXIgZnJvbSBcIi4vc2NyaXB0L1BsYXllclwiXHJcbi8qXHJcbiog5ri45oiP5Yid5aeL5YyW6YWN572uO1xyXG4qL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lQ29uZmlne1xyXG4gICAgc3RhdGljIHdpZHRoOm51bWJlcj0xMTM2O1xyXG4gICAgc3RhdGljIGhlaWdodDpudW1iZXI9NjQwO1xyXG4gICAgc3RhdGljIHNjYWxlTW9kZTpzdHJpbmc9XCJmaXhlZGF1dG9cIjtcclxuICAgIHN0YXRpYyBzY3JlZW5Nb2RlOnN0cmluZz1cImhvcml6b250YWxcIjtcclxuICAgIHN0YXRpYyBhbGlnblY6c3RyaW5nPVwidG9wXCI7XHJcbiAgICBzdGF0aWMgYWxpZ25IOnN0cmluZz1cImxlZnRcIjtcclxuICAgIHN0YXRpYyBzdGFydFNjZW5lOmFueT1cImdhbWUvR2FtZS5zY2VuZVwiO1xyXG4gICAgc3RhdGljIHNjZW5lUm9vdDpzdHJpbmc9XCJcIjtcclxuICAgIHN0YXRpYyBkZWJ1Zzpib29sZWFuPWZhbHNlO1xyXG4gICAgc3RhdGljIHN0YXQ6Ym9vbGVhbj10cnVlO1xyXG4gICAgc3RhdGljIHBoeXNpY3NEZWJ1Zzpib29sZWFuPWZhbHNlO1xyXG4gICAgc3RhdGljIGV4cG9ydFNjZW5lVG9Kc29uOmJvb2xlYW49dHJ1ZTtcclxuICAgIGNvbnN0cnVjdG9yKCl7fVxyXG4gICAgc3RhdGljIGluaXQoKXtcclxuICAgICAgICB2YXIgcmVnOiBGdW5jdGlvbiA9IExheWEuQ2xhc3NVdGlscy5yZWdDbGFzcztcclxuICAgICAgICByZWcoXCJzY3JpcHQvR2FtZS50c1wiLEdhbWUpO1xuICAgICAgICByZWcoXCJzY3JpcHQvQmFsbC50c1wiLEJhbGwpO1xuICAgICAgICByZWcoXCJzY3JpcHQvR2FtZUNvbnRyb2wudHNcIixHYW1lQ29udHJvbCk7XG4gICAgICAgIHJlZyhcInNjcmlwdC9QbGF5ZXIudHNcIixQbGF5ZXIpO1xyXG4gICAgfVxyXG59XHJcbkdhbWVDb25maWcuaW5pdCgpOyIsImltcG9ydCBHYW1lQ29uZmlnIGZyb20gXCIuL0dhbWVDb25maWdcIjtcclxuY2xhc3MgTWFpbiB7XHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHQvL+agueaNrklEReiuvue9ruWIneWni+WMluW8leaTjlx0XHRcclxuXHRcdGlmICh3aW5kb3dbXCJMYXlhM0RcIl0pIExheWEzRC5pbml0KEdhbWVDb25maWcud2lkdGgsIEdhbWVDb25maWcuaGVpZ2h0KTtcclxuXHRcdGVsc2UgTGF5YS5pbml0KEdhbWVDb25maWcud2lkdGgsIEdhbWVDb25maWcuaGVpZ2h0LCBMYXlhW1wiV2ViR0xcIl0pO1xyXG5cdFx0TGF5YVtcIlBoeXNpY3NcIl0gJiYgTGF5YVtcIlBoeXNpY3NcIl0uZW5hYmxlKCk7XHJcblx0XHRMYXlhW1wiRGVidWdQYW5lbFwiXSAmJiBMYXlhW1wiRGVidWdQYW5lbFwiXS5lbmFibGUoKTtcclxuXHRcdExheWEuc3RhZ2Uuc2NhbGVNb2RlID0gR2FtZUNvbmZpZy5zY2FsZU1vZGU7XHJcblx0XHRMYXlhLnN0YWdlLnNjcmVlbk1vZGUgPSBHYW1lQ29uZmlnLnNjcmVlbk1vZGU7XHJcblx0XHQvL+WFvOWuueW+ruS/oeS4jeaUr+aMgeWKoOi9vXNjZW5l5ZCO57yA5Zy65pmvXHJcblx0XHRMYXlhLlVSTC5leHBvcnRTY2VuZVRvSnNvbiA9IEdhbWVDb25maWcuZXhwb3J0U2NlbmVUb0pzb247XHJcblxyXG5cdFx0Ly/miZPlvIDosIPor5XpnaLmnb/vvIjpgJrov4dJREXorr7nva7osIPor5XmqKHlvI/vvIzmiJbogIV1cmzlnLDlnYDlop7liqBkZWJ1Zz10cnVl5Y+C5pWw77yM5Z2H5Y+v5omT5byA6LCD6K+V6Z2i5p2/77yJXHJcblx0XHRpZiAoR2FtZUNvbmZpZy5kZWJ1ZyB8fCBMYXlhLlV0aWxzLmdldFF1ZXJ5U3RyaW5nKFwiZGVidWdcIikgPT0gXCJ0cnVlXCIpIExheWEuZW5hYmxlRGVidWdQYW5lbCgpO1xyXG5cdFx0aWYgKEdhbWVDb25maWcucGh5c2ljc0RlYnVnICYmIExheWFbXCJQaHlzaWNzRGVidWdEcmF3XCJdKSBMYXlhW1wiUGh5c2ljc0RlYnVnRHJhd1wiXS5lbmFibGUoKTtcclxuXHRcdGlmIChHYW1lQ29uZmlnLnN0YXQpIExheWEuU3RhdC5zaG93KCk7XHJcblx0XHRMYXlhLmFsZXJ0R2xvYmFsRXJyb3IgPSB0cnVlO1xyXG5cclxuXHRcdC8v5r+A5rS76LWE5rqQ54mI5pys5o6n5Yi277yMdmVyc2lvbi5qc29u55SxSURF5Y+R5biD5Yqf6IO96Ieq5Yqo55Sf5oiQ77yM5aaC5p6c5rKh5pyJ5Lmf5LiN5b2x5ZON5ZCO57ut5rWB56iLXHJcblx0XHRMYXlhLlJlc291cmNlVmVyc2lvbi5lbmFibGUoXCJ2ZXJzaW9uLmpzb25cIiwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCB0aGlzLm9uVmVyc2lvbkxvYWRlZCksIExheWEuUmVzb3VyY2VWZXJzaW9uLkZJTEVOQU1FX1ZFUlNJT04pO1xyXG5cdH1cclxuXHJcblx0b25WZXJzaW9uTG9hZGVkKCk6IHZvaWQge1xyXG5cdFx0Ly/mv4DmtLvlpKflsI/lm77mmKDlsITvvIzliqDovb3lsI/lm77nmoTml7blgJnvvIzlpoLmnpzlj5HnjrDlsI/lm77lnKjlpKflm77lkIjpm4bph4zpnaLvvIzliJnkvJjlhYjliqDovb3lpKflm77lkIjpm4bvvIzogIzkuI3mmK/lsI/lm75cclxuXHRcdExheWEuQXRsYXNJbmZvTWFuYWdlci5lbmFibGUoXCJmaWxlY29uZmlnLmpzb25cIiwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCB0aGlzLm9uQ29uZmlnTG9hZGVkKSk7XHJcblx0fVxyXG5cclxuXHRvbkNvbmZpZ0xvYWRlZCgpOiB2b2lkIHtcclxuXHRcdC8v5Yqg6L29SURF5oyH5a6a55qE5Zy65pmvXHJcblx0XHRHYW1lQ29uZmlnLnN0YXJ0U2NlbmUgJiYgTGF5YS5TY2VuZS5vcGVuKEdhbWVDb25maWcuc3RhcnRTY2VuZSk7XHJcblx0fVxyXG59XHJcbi8v5r+A5rS75ZCv5Yqo57G7XHJcbm5ldyBNYWluKCk7XHJcbiIsIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHsgdWkgfSBmcm9tIFwiLi8uLi91aS9sYXlhTWF4VUlcIjtcbmltcG9ydCBHYW1lIGZyb20gJy4vR2FtZSc7XG5cbmNvbnN0IGluaXRpYWxQb3NpdGlvbldoaXRlOiBMYXlhLlBvaW50ID0gbmV3IExheWEuUG9pbnQoMTQwLCAyMDgpO1xuXG4vKipcbiAqIOWtkOW8ueiEmuacrO+8jOWunueOsOWtkOW8uemjnuihjOmAu+i+keWPiuWvueixoeaxoOWbnuaUtuacuuWItlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCYWxsIGV4dGVuZHMgTGF5YS5TY3JpcHQge1xuICAgIC8qKiBAcHJvcCB7IG5hbWU6IG51bWJlciwgdGlwczpcIueQg+eahOWPt+egge+8jDAg5Luj6KGo55m955CDXCIsIHR5cGU6IGludH0qL1xuICAgIG51bWJlcjogbnVtYmVyO1xuXG4gICAgaXNJbml0aWFsaXplZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7IFxuICAgIH1cblxuICAgIG9uRW5hYmxlKCk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMuaXNJbml0aWFsaXplZCkge1xuICAgICAgICAgICAgLy8g5rWL6K+V5pe25YCZ5rKh5pyJ55qu6IKkLCDnlKjnmoTnmb3nkIMgKyDmlbDlrZdcbiAgICAgICAgICAgIC8vIGlmICh0aGlzLm51bWJlcikge1xuICAgICAgICAgICAgLy8gICAgIGNvbnN0IGxhYmVsOiBMYXlhLkxhYmVsID0gdGhpcy5vd25lci5nZXRDaGlsZEJ5TmFtZSgnbGFiZWwnKSBhcyBMYXlhLkxhYmVsO1xuICAgICAgICBcbiAgICAgICAgICAgIC8vICAgICBsYWJlbC50ZXh0ID0gYCR7dGhpcy5udW1iZXJ9YDtcbiAgICAgICAgICAgIC8vIH1cbiAgICBcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLm93bmVyLCAnc3RhcnRNb3ZlJywge1xuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHZhbHVlKHhGb3JjZTogbnVtYmVyLCB5Rm9yY2U6IG51bWJlcik6IHZvaWQge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmlnOiBMYXlhLlJpZ2lkQm9keSA9IHRoaXMuZ2V0Q29tcG9uZW50KExheWEuUmlnaWRCb2R5KTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgcmlnLnNldFZlbG9jaXR5KHsgeDogeEZvcmNlLCB5OiB5Rm9yY2UgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8g5Zug5Li6IGdhbWUg6YeM5piv5Liq5a6a5pe25ZmoLCDmiYDku6XlrZjlnKjliJrngrnnmb3nkIPnmoTml7blgJnov57lh7vlj6/ku6XlpJrmrKHlh7vnkIPnmoTpl67pophcbiAgICAgICAgICAgICAgICAgICAgR2FtZS5pbnN0YW5jZS5pc0JhbGxSdW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuaXNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbkRpc2FibGUoKTogdm9pZCB7fVxuXG4gICAgb25VcGRhdGUoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IG93bmVyID0gdGhpcy5vd25lciBhcyBMYXlhLlNwcml0ZTtcblxuICAgICAgICBjb25zdCB7IHgsIHkgfSA9IG93bmVyO1xuXG4gICAgICAgIGNvbnN0IHsgc3RhcnRYLCBzdGFydFksIGVuZFgsIGVuZFksIG1pZGRsZSwgbWlkZGxlTGVmdCwgbWlkZGxlUmlnaHQgfSA9IEdhbWUuaW5zdGFuY2UuZ2V0Q29sbGlzaW9uQ29vcmRpbmF0ZSgpO1xuXG4gICAgICAgIGNvbnN0IHJpZzogTGF5YS5SaWdpZEJvZHkgPSB0aGlzLm93bmVyLmdldENvbXBvbmVudChMYXlhLlJpZ2lkQm9keSlcbiAgICAgICAgY29uc3QgeyB4OiBjdXJyZW50WCwgeTogY3VycmVudFkgfSA9IHJpZy5saW5lYXJWZWxvY2l0eTtcblxuICAgICAgICAvLyDnkIPmnIDlkI7pm7bngrnlh6DnmoTkvY3np7vln7rmnKznnIvkuI3lh7rmnaXkuoYsIOi/meaXtuWAmeWGjee7p+e7reetieW+heWunuWcqOaYr+WkquaZuumanOS6hlxuICAgICAgICBpZiAoMyA+IHggJiYgLTMgPCB4ICYmIDMgPiB5ICYmIC0zIDwgeSkge1xuICAgICAgICAgICAgLy8g5Zug5Li66L+Z5Liq6YO95piv56Kw5pKe5pON5L2cLCDmiYDku6XkuIDoiKzkuI3lpKrlj6/og73lh7rnjrDpnZ7nur/mgKfpmY3pgJ8sIOW6lOivpemDveiDveinpuWPkei/meS4quS4nOilv1xuICAgICAgICAgICAgaWYgKDAgIT09IHggJiYgMCAhPT0geSkge1xuICAgICAgICAgICAgICAgIHJpZy5zZXRWZWxvY2l0eSh7IHg6IDAsIHk6IDAsIH0pO1xuICAgICAgICAgICAgICAgIC8vIGlmIChHYW1lLmluc3RhbmNlLmJhbGxSdW5uaW5nW3RoaXMubnVtYmVyXSkge1xuICAgICAgICAgICAgICAgIC8vICAgICBHYW1lLmluc3RhbmNlLmJhbGxSdW5uaW5nW3RoaXMubnVtYmVyXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIOWPquacieaYr+mdnuWKqOeKtuaAgeaJjeS8mue9ruS4uuWKqFxuICAgICAgICAgICAgLy8gaWYgKCFHYW1lLmluc3RhbmNlLmJhbGxSdW5uaW5nW3RoaXMubnVtYmVyXSkge1xuICAgICAgICAgICAgLy8gICAgIEdhbWUuaW5zdGFuY2UuYmFsbFJ1bm5pbmdbdGhpcy5udW1iZXJdID0gdHJ1ZTtcbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh4IDwgc3RhcnRYKSB7XG4gICAgICAgICAgICBpZiAoeSA8IHN0YXJ0WSkge1xuICAgICAgICAgICAgICAgIGlmICgyMiA+IE1hdGguc3FydCh4ICoqIDIgKyB5ICoqIDIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCflt6bkuIrmtJ4nKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVyR29hbCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoeSA+IGVuZFkpIHtcbiAgICAgICAgICAgICAgICBpZiAoMjIgPiBNYXRoLnNxcnQoXG4gICAgICAgICAgICAgICAgICAgICgoMjIgLSAoc3RhcnRYIC0geCkpICoqIDIpICsgXG4gICAgICAgICAgICAgICAgICAgICgoMjIgLSAoeSAtIGVuZFkpKSAqKiAyKVxuICAgICAgICAgICAgICAgICkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+W3puS4i+a0nicpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJHb2FsKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHggPiBlbmRYKSB7XG4gICAgICAgICAgICBpZiAoeSA8IHN0YXJ0WSkge1xuICAgICAgICAgICAgICAgIGlmICgyMiA+IE1hdGguc3FydChcbiAgICAgICAgICAgICAgICAgICAgKCgyMiAtICh4IC0gZW5kWCkpICoqIDIpICsgXG4gICAgICAgICAgICAgICAgICAgICgoMjIgLSAoc3RhcnRZIC0geSkpICoqIDIpXG4gICAgICAgICAgICAgICAgKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5Y+z5LiK5rSeJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckdvYWwoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHkgPiBlbmRZKSB7XG4gICAgICAgICAgICAgICAgaWYgKDIyID4gTWF0aC5zcXJ0KFxuICAgICAgICAgICAgICAgICAgICAoKDIyIC0gKHggLSBlbmRYKSkgKiogMikgKyBcbiAgICAgICAgICAgICAgICAgICAgKCgyMiAtICh5IC0gZW5kWSkpICoqIDIpXG4gICAgICAgICAgICAgICAgKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5Y+z5LiL5rSeJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlckdvYWwoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoeSA8IHN0YXJ0WSkge1xuICAgICAgICAgICAgaWYgKHggPiBtaWRkbGVMZWZ0ICYmIHggPCBtaWRkbGVSaWdodCkge1xuICAgICAgICAgICAgICAgIGlmICgyMiA+IE1hdGguc3FydChcbiAgICAgICAgICAgICAgICAgICAgKCh4IC0gbWlkZGxlKSAqKiAyKSArIFxuICAgICAgICAgICAgICAgICAgICAoKDIyIC0gKHN0YXJ0WSAtIHkpKSAqKiAyKVxuICAgICAgICAgICAgICAgICkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+S4reS4iua0nicpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJHb2FsKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHkgPiBlbmRZKSB7XG4gICAgICAgICAgICBpZiAoeCA+IG1pZGRsZUxlZnQgJiYgeCA8IG1pZGRsZVJpZ2h0KSB7XG4gICAgICAgICAgICAgICAgaWYgKDIyID4gTWF0aC5zcXJ0KFxuICAgICAgICAgICAgICAgICAgICAoKHggLSBtaWRkbGUpICoqIDIpICsgXG4gICAgICAgICAgICAgICAgICAgICgoMjIgLSAoeSAtIGVuZFkpKSAqKiAyKVxuICAgICAgICAgICAgICAgICkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+S4reS4i+a0nicpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJHb2FsKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIOWFtuS7luaDheWGteWwseaYr+WcqOahjOWtkOS4remXtOS6hlxuICAgIH1cblxuICAgIGhhbmRsZXJHb2FsKCk6IHZvaWQge1xuICAgICAgICAvLyBpZiAoMCA9PT0gdGhpcy5udW1iZXIpIHtcbiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCfnmb3nkIPov5vkuoYnKTtcbiAgICAgICAgLy8gICAgICh0aGlzLm93bmVyIGFzIExheWEuU3ByaXRlKS5wb3MoaW5pdGlhbFBvc2l0aW9uV2hpdGUueCwgaW5pdGlhbFBvc2l0aW9uV2hpdGUueSk7XG4gICAgICAgIC8vIH0gZWxzZSB7XG4gICAgICAgIC8vICAgICBjb25zb2xlLmxvZygn6L+b55CD77yBXGInLCB0aGlzLm51bWJlcik7XG4gICAgICAgIC8vICAgICAvLyBUT0RPIOimgeiuoeeul+S4i+S4i+aWueiuoeWIhuWMuuS9jee9ruWcqOWTqlxuICAgICAgICAvLyAgICAgdGhpcy5vd25lci5yZW1vdmVTZWxmKCk7XG4gICAgICAgIC8vICAgICBjb25zdCBjb250YWluZXJHb2FsID0gR2FtZS5pbnN0YW5jZS5jb250YWluZXJfZ29hbC5hZGRDaGlsZCh0aGlzLm93bmVyKTtcbiAgICAgICAgLy8gfVxuICAgICAgICAvLyBHYW1lLmluc3RhbmNlLmV2ZW50KCdiYWxsLmdvYWwnLCB0aGlzLm51bWJlcik7XG4gICAgICAgIChHYW1lLmluc3RhbmNlIGFzIGFueSkuaGFuZGxlckdvYWwodGhpcy5udW1iZXIpO1xuICAgIH1cbn0iLCJpbXBvcnQgeyB1aSB9IGZyb20gXCIuLy4uL3VpL2xheWFNYXhVSVwiO1xuaW1wb3J0IEdhbWVDb250cm9sIGZyb20gXCIuL0dhbWVDb250cm9sXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZSBleHRlbmRzIHVpLmdhbWUuR2FtZVVJIHtcbiAgICBzdGF0aWMgaW5zdGFuY2U6IEdhbWU7XG5cbiAgICAvLyBiYWxsUnVubmluZzogeyBba2V5OiBzdHJpbmddOiBib29sZWFuIH0gPSB7XG4gICAgLy8gICAgIDA6IGZhbHNlLFxuICAgIC8vICAgICAxOiBmYWxzZSxcbiAgICAvLyAgICAgMjogZmFsc2UsXG4gICAgLy8gICAgIDM6IGZhbHNlLFxuICAgIC8vICAgICA0OiBmYWxzZSxcbiAgICAvLyAgICAgNTogZmFsc2UsXG4gICAgLy8gICAgIDY6IGZhbHNlLFxuICAgIC8vICAgICA3OiBmYWxzZSxcbiAgICAvLyAgICAgODogZmFsc2UsXG4gICAgLy8gICAgIDk6IGZhbHNlLFxuICAgIC8vICAgICAxMDogZmFsc2UsXG4gICAgLy8gICAgIDExOiBmYWxzZSxcbiAgICAvLyAgICAgMTI6IGZhbHNlLFxuICAgIC8vICAgICAxMzogZmFsc2UsXG4gICAgLy8gICAgIDE0OiBmYWxzZSxcbiAgICAvLyAgICAgMTU6IGZhbHNlLFxuICAgIC8vIH07XG5cbiAgICBwcml2YXRlIF9iYWxsc1JpZ2lkOiB7IFtrZXk6IG51bWJlcl06IExheWEuUmlnaWRCb2R5IH0gPSB7XG4gICAgICAgIDA6IHVuZGVmaW5lZCxcbiAgICAgICAgMTogdW5kZWZpbmVkLFxuICAgICAgICAyOiB1bmRlZmluZWQsXG4gICAgICAgIDM6IHVuZGVmaW5lZCxcbiAgICAgICAgNDogdW5kZWZpbmVkLFxuICAgICAgICA1OiB1bmRlZmluZWQsXG4gICAgICAgIDY6IHVuZGVmaW5lZCxcbiAgICAgICAgNzogdW5kZWZpbmVkLFxuICAgICAgICA4OiB1bmRlZmluZWQsXG4gICAgICAgIDk6IHVuZGVmaW5lZCxcbiAgICAgICAgMTA6IHVuZGVmaW5lZCxcbiAgICAgICAgMTE6IHVuZGVmaW5lZCxcbiAgICAgICAgMTI6IHVuZGVmaW5lZCxcbiAgICAgICAgMTM6IHVuZGVmaW5lZCxcbiAgICAgICAgMTQ6IHVuZGVmaW5lZCxcbiAgICAgICAgMTU6IHVuZGVmaW5lZCxcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBfaXNCYWxsUnVubmluZzogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgcHJpdmF0ZSBfY29udHJvbDogR2FtZUNvbnRyb2w7XG4gICAgcHJpdmF0ZSBfY29udGFpbmVyQmFsbDogTGF5YS5TcHJpdGU7XG4gICAgcHJpdmF0ZSBfY29udGFpbmVyR29hbDogTGF5YS5TcHJpdGU7XG5cbiAgICBwcml2YXRlIF9zdGFydFg6IG51bWJlcjtcbiAgICBwcml2YXRlIF9zdGFydFk6IG51bWJlcjtcbiAgICBwcml2YXRlIF9lbmRYOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBfZW5kWTogbnVtYmVyO1xuXG4gICAgcHJpdmF0ZSBfbWlkZGxlOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBfbWlkZGxlTGVmdDogbnVtYmVyO1xuICAgIHByaXZhdGUgX21pZGRsZVJpZ2h0OiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiDov5nkuKogZ2V0IHNldCDlhpnnmoTmnInngrnlgrssIOacrOadpeS7peS4uuWPqumcgOimgeWGmSBnZXQg55qEXG4gICAgICovXG4gICAgZ2V0IGlzQmFsbFJ1bm5pbmcoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc0JhbGxSdW5uaW5nO1xuICAgIH1cblxuICAgIHNldCBpc0JhbGxSdW5uaW5nKHZhbDogYm9vbGVhbikge1xuICAgICAgICB0aGlzLl9pc0JhbGxSdW5uaW5nID0gdmFsO1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIEdhbWUuaW5zdGFuY2UgPSB0aGlzO1xuICAgIH1cblxuICAgIG9uRW5hYmxlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLl9jb250cm9sID0gdGhpcy5nZXRDb21wb25lbnQoR2FtZUNvbnRyb2wpO1xuICAgICAgICB0aGlzLl9jb250YWluZXJHb2FsID0gdGhpcy5nZXRDaGlsZEJ5TmFtZSgnY29udGFpbmVyX2dvYWwnKSBhcyBMYXlhLlNwcml0ZTtcbiAgICAgICAgY29uc3QgY29udGFpbmVyQmFsbCA9IHRoaXMuX2NvbnRhaW5lckJhbGwgPSB0aGlzLmdldENoaWxkQnlOYW1lKCdjb250YWluZXJfYmFsbCcpIGFzIExheWEuU3ByaXRlO1xuXG4gICAgICAgIHRoaXMuX3N0YXJ0WCA9IDA7XG4gICAgICAgIHRoaXMuX3N0YXJ0WSA9IDA7XG4gICAgICAgIHRoaXMuX2VuZFggPSBjb250YWluZXJCYWxsLndpZHRoO1xuICAgICAgICB0aGlzLl9lbmRZID0gY29udGFpbmVyQmFsbC5oZWlnaHQ7XG5cbiAgICAgICAgdGhpcy5fbWlkZGxlID0gY29udGFpbmVyQmFsbC53aWR0aCAvIDI7XG4gICAgICAgIHRoaXMuX21pZGRsZUxlZnQgPSBjb250YWluZXJCYWxsLndpZHRoIC8gMiAtIDIyO1xuICAgICAgICB0aGlzLl9taWRkbGVSaWdodCA9IGNvbnRhaW5lckJhbGwud2lkdGggLyAyICsgMjI7XG5cbiAgICAgICAgdGhpcy5fc3RhcnRYICs9IDIyO1xuICAgICAgICB0aGlzLl9zdGFydFkgKz0gMjI7XG4gICAgICAgIHRoaXMuX2VuZFggLT0gMjI7XG4gICAgICAgIHRoaXMuX2VuZFkgLT0gMjI7XG5cbiAgICAgICAgLy8gdGhpcy5zaG93UmVjdCgpO1xuXG4gICAgICAgIGxldCB0ZW1wQmFsbDogTGF5YS5Ob2RlID0gY29udGFpbmVyQmFsbC5nZXRDaGlsZEJ5TmFtZSgnYmFsbF93aGl0ZScpO1xuICAgICAgICBpZiAodGVtcEJhbGwpIHtcbiAgICAgICAgICAgIHRoaXMuX2JhbGxzUmlnaWRbMF0gPSB0ZW1wQmFsbC5nZXRDb21wb25lbnQoTGF5YS5SaWdpZEJvZHkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDEsIGwgPSAxNjsgaSA8IGw7ICsraSkge1xuICAgICAgICAgICAgdGVtcEJhbGwgPSBjb250YWluZXJCYWxsLmdldENoaWxkQnlOYW1lKGBiYWxsXyR7MTAgPiBpID8gYDAke2l9YCA6IGl9YCk7XG4gICAgICAgICAgICBpZiAodGVtcEJhbGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9iYWxsc1JpZ2lkW2ldID0gdGVtcEJhbGwuZ2V0Q29tcG9uZW50KExheWEuUmlnaWRCb2R5KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fYmFsbHNSaWdpZFtpXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOWPjeato+i/meS4quaYr+WIpOaWreacieayoeacieWcqOWKqOeahCwg6Lef552A5bin6LWw5bqU6K+l5beu5LiN5aSaXG4gICAgICAgIC8vIFxi5LiA56eS5LiA5qyh5p+Q5Lqb5pe25YCZ562J5b6F5aSq5LmFXG4gICAgICAgIExheWEudGltZXIuZnJhbWVMb29wKDMwLCB0aGlzLCB0aGlzLmNhbGN1bGF0ZUJhbGxTdGF0dWUpO1xuICAgIH1cblxuICAgIG9uRGlzYWJsZSgpOiB2b2lkIHtcbiAgICAgICAgTGF5YS50aW1lci5jbGVhcih0aGlzLCB0aGlzLmNhbGN1bGF0ZUJhbGxTdGF0dWUpO1xuICAgIH1cblxuICAgIGNhbGN1bGF0ZUJhbGxTdGF0dWUoKTogdm9pZCB7XG4gICAgICAgIGxldCBpc1J1bm5pbmc6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgICAgICBmb3IgKGxldCBrZXkgb2YgT2JqZWN0LmtleXModGhpcy5fYmFsbHNSaWdpZCkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9iYWxsc1JpZ2lkW2tleV0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHg6IGN1cnJlbnRYLCB5OiBjdXJyZW50WSB9ID0gdGhpcy5fYmFsbHNSaWdpZFtrZXldLmxpbmVhclZlbG9jaXR5O1xuXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRYICYmIGN1cnJlbnRZKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzUnVubmluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8g5b2T5omA5pyJ55CD5YGc5q2i6L+Q5Yqo55qE5pe25YCZLCDop6blj5HkuKrkuovku7bnu5nlpJbpnaJcbiAgICAgICAgaWYgKHRoaXMuX2lzQmFsbFJ1bm5pbmcgJiYgIWlzUnVubmluZykge1xuICAgICAgICAgICAgdGhpcy5ldmVudCgnYmFsbC5hbGwuc3RvcCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5faXNCYWxsUnVubmluZyA9IGlzUnVubmluZztcbiAgICB9XG5cbiAgICBnZXRDb2xsaXNpb25Db29yZGluYXRlKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhcnRYOiB0aGlzLl9zdGFydFgsXG4gICAgICAgICAgICBzdGFydFk6IHRoaXMuX3N0YXJ0WSxcbiAgICAgICAgICAgIGVuZFg6IHRoaXMuX2VuZFgsXG4gICAgICAgICAgICBlbmRZOiB0aGlzLl9lbmRZLFxuXG4gICAgICAgICAgICBtaWRkbGU6IHRoaXMuX21pZGRsZSxcbiAgICAgICAgICAgIG1pZGRsZUxlZnQ6IHRoaXMuX21pZGRsZUxlZnQsXG4gICAgICAgICAgICBtaWRkbGVSaWdodDogdGhpcy5fbWlkZGxlUmlnaHQsXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIOWxleekuueisOaSnuahhlxuICAgICAqL1xuICAgIHNob3dSZWN0KCk6IHZvaWQge1xuICAgICAgICBjb25zdCBsaW5lID0gbmV3IExheWEuU3ByaXRlKCk7XG5cbiAgICAgICAgbGluZS5ncmFwaGljcy5kcmF3UmVjdCh0aGlzLl9taWRkbGUsIDAsIDIsIDUwMCwgJyNmZjAwMDAnKTtcbiAgICAgICAgbGluZS5ncmFwaGljcy5kcmF3UmVjdCh0aGlzLl9taWRkbGVMZWZ0LCAwLCAyLCA1MDAsICcjZmYwMDAwJyk7XG4gICAgICAgIGxpbmUuZ3JhcGhpY3MuZHJhd1JlY3QodGhpcy5fbWlkZGxlUmlnaHQsIDAsIDIsIDUwMCwgJyNmZjAwMDAnKTtcbiAgICAgICAgbGluZS5ncmFwaGljcy5kcmF3UmVjdCh0aGlzLl9zdGFydFgsIDAsIDIsIDUwMCwgJyNmZjAwMDAnKTtcbiAgICAgICAgbGluZS5ncmFwaGljcy5kcmF3UmVjdCh0aGlzLl9lbmRYLCAwLCAyLCA1MDAsICcjZmYwMDAwJyk7XG4gICAgICAgIGxpbmUuZ3JhcGhpY3MuZHJhd1JlY3QoMCwgdGhpcy5fc3RhcnRZLCA5MDAsIDIsICcjZmYwMDAwJyk7XG4gICAgICAgIGxpbmUuZ3JhcGhpY3MuZHJhd1JlY3QoMCwgdGhpcy5fZW5kWSwgOTAwLCAyLCAnI2ZmMDAwMCcpO1xuXG4gICAgICAgIHRoaXMuYWRkQ2hpbGQobGluZSk7XG4gICAgfVxufSIsIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IEdhbWUgZnJvbSAnLi9HYW1lJztcbmltcG9ydCBCYWxsIGZyb20gJy4vQmFsbCc7XG5pbXBvcnQgUGxheWVyIGZyb20gJy4vUGxheWVyJztcblxuY29uc3QgaW5pdGlhbFBvc2l0aW9uV2hpdGU6IExheWEuUG9pbnQgPSBuZXcgTGF5YS5Qb2ludCgxNDAsIDIwOCk7XG4vLyDov5vnkIPlkI7lnKjkuIvmlrnlsZXnpLrljLrln5/mmK/lkKblsIbop5Lluqblm57mraMgKOaIkeaEn+inieS4jeWbnuato+S5n+aMuuWlveeci+eahClcbmNvbnN0IGlzR29hbFJvdGF0aW9uUmVzZXQ6IGJvb2xlYW4gPSB0cnVlO1xuXG4vKipcbiAqIOa4uOaIj+aOp+WItuiEmuacrOOAguWumuS5ieS6huWHoOS4qmRyb3BCb3jvvIxidWxsZXTvvIxjcmVhdGVCb3hJbnRlcnZhbOetieWPmOmHj++8jOiDveWkn+WcqElEReaYvuekuuWPiuiuvue9ruivpeWPmOmHj1xuICog5pu05aSa57G75Z6L5a6a5LmJ77yM6K+35Y+C6ICD5a6Y5pa55paH5qGjXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVDb250cm9sIGV4dGVuZHMgTGF5YS5TY3JpcHQge1xuICAgIHN0YXRpYyBpbnN0YW5jZTogR2FtZUNvbnRyb2w7XG5cbiAgICBwcml2YXRlIF9jb250YWluZXJCYWxsOiBMYXlhLlNwcml0ZTtcbiAgICBwcml2YXRlIF9wbGF5ZXJMZWZ0OiBMYXlhLlNwcml0ZTtcbiAgICBwcml2YXRlIF9wbGF5ZXJSaWdodDogTGF5YS5TcHJpdGU7XG5cbiAgICAvKipcbiAgICAgKiDnm67liY0gMCDku6PooaggbGVmdCAxIOS7o+ihqCByaWdodFxuICAgICAqL1xuICAgIHByaXZhdGUgX3BsYXllckN1cnJlbnQ6IG51bWJlcjtcbiAgICBwcml2YXRlIF9nb2FsOiB7IFtrZXk6IG51bWJlcl06IGJvb2xlYW4gfSA9IHtcbiAgICAgICAgMTogZmFsc2UsXG4gICAgICAgIDI6IGZhbHNlLFxuICAgICAgICAzOiBmYWxzZSxcbiAgICAgICAgNDogZmFsc2UsXG4gICAgICAgIDU6IGZhbHNlLFxuICAgICAgICA2OiBmYWxzZSxcbiAgICAgICAgNzogZmFsc2UsXG4gICAgICAgIDg6IGZhbHNlLFxuICAgICAgICA5OiBmYWxzZSxcbiAgICAgICAgMTA6IGZhbHNlLFxuICAgICAgICAxMTogZmFsc2UsXG4gICAgICAgIDEyOiBmYWxzZSxcbiAgICAgICAgMTM6IGZhbHNlLFxuICAgICAgICAxNDogZmFsc2UsXG4gICAgICAgIDE1OiBmYWxzZSxcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBfZmxhZ3M6IHtcbiAgICAgICAgZ29hbFRoaXNUdXJuOiBudW1iZXJbXSxcbiAgICB9ID0ge1xuICAgICAgICBnb2FsVGhpc1R1cm46IFtdLFxuICAgIH07XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTsgXG4gICAgfVxuXG4gICAgb25FbmFibGUoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lckJhbGwgPSB0aGlzLm93bmVyLmdldENoaWxkQnlOYW1lKFwiY29udGFpbmVyX2JhbGxcIikgYXMgTGF5YS5TcHJpdGU7XG4gICAgICAgIHRoaXMuX3BsYXllckxlZnQgPSB0aGlzLm93bmVyLmdldENoaWxkQnlOYW1lKCdwbGF5ZXJfbGVmdCcpIGFzIExheWEuU3ByaXRlO1xuICAgICAgICB0aGlzLl9wbGF5ZXJSaWdodCA9IHRoaXMub3duZXIuZ2V0Q2hpbGRCeU5hbWUoJ3BsYXllcl9yaWdodCcpIGFzIExheWEuU3ByaXRlO1xuXG4gICAgICAgIHRoaXMuYWRkTGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgb25EaXNhYmxlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVycygpO1xuICAgIH1cblxuICAgIG9uU3RhZ2VDbGljayhlOiBMYXlhLkV2ZW50KTogdm9pZCB7XG4gICAgICAgIC8v5YGc5q2i5LqL5Lu25YaS5rOh77yM5o+Q6auY5oCn6IO977yM5b2T54S25Lmf5Y+v5Lul5LiN6KaBXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgLy8g5aaC5p6c55CD5Zyo5YqoLCDlsLHkuI3orqnnu6fnu63lh7vnkIPkuoZcbiAgICAgICAgaWYgKCh0aGlzLm93bmVyIGFzIEdhbWUpLmlzQmFsbFJ1bm5pbmcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOi/meS4quaYr+maj+acuuaWueWQkeeUn+aIkCwg5pyA5pep5byA5Y+R55qE5pe25YCZ55So55qELCDnjrDlnKjml6nlsLHnlKjkuI3liLDkuoZcbiAgICAgICAgLy8gY29uc3QgeDogbnVtYmVyID0gKC41IDwgTWF0aC5yYW5kb20oKSA/IDEgOiAtMSkgKiBNYXRoLnJhbmRvbSgpICogMTA7XG4gICAgICAgIC8vIGNvbnN0IHk6IG51bWJlciA9ICguNSA8IE1hdGgucmFuZG9tKCkgPyAxIDogLTEpICogTWF0aC5yYW5kb20oKSAqIDEwO1xuXG4gICAgICAgIGxldCBiYWxsID0gdGhpcy5fY29udGFpbmVyQmFsbC5nZXRDaGlsZEJ5TmFtZSgnYmFsbF93aGl0ZScpIGFzIExheWEuU3ByaXRlO1xuXG4gICAgICAgIGNvbnN0IHBhcmVudCA9IGJhbGwucGFyZW50IGFzIExheWEuU3ByaXRlO1xuXG4gICAgICAgIGNvbnN0IHRvdWNoWCA9IGUuc3RhZ2VYO1xuICAgICAgICBjb25zdCB0b3VjaFkgPSBlLnN0YWdlWTtcblxuICAgICAgICBjb25zdCBiYWxsWCA9IGJhbGwueCArIHBhcmVudC54O1xuICAgICAgICBjb25zdCBiYWxsWSA9IGJhbGwueSArIHBhcmVudC55O1xuXG4gICAgICAgIGNvbnN0IHg6IG51bWJlciA9ICh0b3VjaFggLSBiYWxsWCkgLyAyMDtcbiAgICAgICAgY29uc3QgeTogbnVtYmVyID0gKHRvdWNoWSAtIGJhbGxZKSAvIDIwO1xuXG4gICAgICAgIC8vIOi/meS4quaYr+W8gOWPkeaXtueUqOadpeWIpOaWreeCueWHu+S9jee9ruWSjFxi55CD6L+Q6KGM5pa55ZCR55So55qELCDnjrDlnKjlt7Lnu4/nrpflpb3kuoYsIOWwseWFiOmakOiXjywg5Lul5ZCO6LCD6K+V5Y+v5Lul57un57ut55SoXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHRvdWNoWCwgdG91Y2hZLCBiYWxsWCwgYmFsbFksIHgsIHkpO1xuXG4gICAgICAgIChiYWxsIGFzIGFueSkuc3RhcnRNb3ZlKHgsIHkpO1xuICAgIH1cblxuICAgIGFkZExpc3RlbmVycygpOiB2b2lkIHtcbiAgICAgICAgLy8gdGhpcy5vd25lci5vbignYmFsbC5nb2FsJywgdGhpcywgdGhpcy5oYW5kbGVyR29hbCk7XG4gICAgICAgIC8vIOWboOS4uuS9v+eUqOS6i+S7tuezu+e7n+S8muWvvOiHtOi/m+eQg+WIpOWumuWPmOaIkFxi5byC5q2l5LiU5Lya6YeN5YWlLCDlm6DogIzlnKjov5nph4zmlLnmiJDkuobnm7TmjqXmiorlh73mlbDlrprkuYnkuIrljrvnmoTmlrnms5VcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMub3duZXIsICdoYW5kbGVyR29hbCcsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgdmFsdWU6IChudW1iZXI6IG51bWJlcikgPT4gdGhpcy5oYW5kbGVyR29hbChudW1iZXIpLFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLm93bmVyLm9uKCdiYWxsLmFsbC5zdG9wJywgdGhpcywgdGhpcy5qdWRnZVNob3QpO1xuICAgIH1cblxuICAgIHJlbW92ZUxpc3RlbmVycygpOiB2b2lkIHtcbiAgICAgICAgLy8gdGhpcy5vd25lci5vZmYoJ2JhbGwuZ29hbCcsIHRoaXMsIHRoaXMuaGFuZGxlckdvYWwpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5vd25lciwgJ2hhbmRsZXJHb2FsJywge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMub3duZXIub2ZmKCdiYWxsLmFsbC5zdG9wJywgdGhpcywgdGhpcy5qdWRnZVNob3QpO1xuICAgIH1cblxuICAgIGhhbmRsZXJHb2FsKG51bWJlcjogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGlmICgwID09PSBudW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfnmb3nkIPov5vkuoYnKTtcbiAgICAgICAgICAgICh0aGlzLl9jb250YWluZXJCYWxsLmdldENoaWxkQnlOYW1lKCdiYWxsX3doaXRlJykgYXMgTGF5YS5TcHJpdGUpLnBvcyhpbml0aWFsUG9zaXRpb25XaGl0ZS54LCBpbml0aWFsUG9zaXRpb25XaGl0ZS55KTtcbiAgICAgICAgfSBlbHNlIGlmICghdGhpcy5fZ29hbFtudW1iZXJdKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn6L+b55CD77yBXGInLCBudW1iZXIpO1xuICAgICAgICAgICAgdGhpcy5fZ29hbFtudW1iZXJdID0gdHJ1ZTtcbiAgICAgICAgICAgIC8vIFRPRE8g6KaB6K6h566X5LiL5LiL5pa56K6h5YiG5Yy65L2N572u5Zyo5ZOqXG4gICAgICAgICAgICBjb25zdCBiYWxsTmFtZTogc3RyaW5nID0gYGJhbGxfJHsxMCA+IG51bWJlciA/IGAwJHtudW1iZXJ9YDogbnVtYmVyfWA7XG4gICAgICAgICAgICBjb25zdCBiYWxsID0gdGhpcy5fY29udGFpbmVyQmFsbC5nZXRDaGlsZEJ5TmFtZShiYWxsTmFtZSkgYXMgTGF5YS5TcHJpdGU7XG5cbiAgICAgICAgICAgIC8vIOi/meS4qiByZW1vdmVTZWxmIOmZpOS6huebtOaOpeWGmeWcqCBiYWxsIOmHjOmdoiwg5ZCm5YiZ6YO95Lya5Zug5Li65pe25bqP6Zeu6aKY5omn6KGM5aSa5qyhLCDov5nph4zkuLrkuobku6PnoIHlpb3nnIssIOWkmuWGmeS6humYsumHjeWFpemAu+i+kVxuICAgICAgICAgICAgYmFsbC5yZW1vdmVTZWxmKCk7XG4gICAgICAgICAgICBiYWxsLnBvcyg0MCAqIChudW1iZXIgLSAxKSArIDMwLCAyNSk7XG4gICAgICAgICAgICBpc0dvYWxSb3RhdGlvblJlc2V0ICYmIChiYWxsLnJvdGF0aW9uID0gMCk7XG4gICAgICAgICAgICAodGhpcy5vd25lciBhcyBHYW1lKS5jb250YWluZXJfZ29hbC5hZGRDaGlsZChiYWxsKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9mbGFncy5nb2FsVGhpc1R1cm4ucHVzaChudW1iZXIpO1xuICAgIH1cblxuICAgIGp1ZGdlU2hvdCgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgZ29hbFRoaXNUdXJuID0gdGhpcy5fZmxhZ3MuZ29hbFRoaXNUdXJuO1xuXG4gICAgICAgIGlmIChnb2FsVGhpc1R1cm4ubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoLTEgPCBnb2FsVGhpc1R1cm4uaW5kZXhPZigwKSkge1xuICAgICAgICAgICAgICAgIC8vIFRPRE9cbiAgICAgICAgICAgICAgICAvLyDlj6/og73pnIDopoHnvZrmnYbvvJ9cbiAgICAgICAgICAgICAgICAvLyDmmK/kuI3mmK/ov5vnkIPlhajkuI3nrpfvvJ9cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKC0xIDwgZ29hbFRoaXNUdXJuLmluZGV4T2YoOCkpIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPIDgg5Y+355CD6L+b5LqG5oCO5LmI566XXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICgtMSA8IGdvYWxUaGlzVHVybi5maW5kSW5kZXgoKG51bWJlcjogbnVtYmVyKTogYm9vbGVhbiA9PiAwICE9PSBudW1iZXIgJiYgOCAhPT0gbnVtYmVyKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBsYXllckxlZnQ6IFBsYXllciA9IHRoaXMuX3BsYXllckxlZnQuZ2V0Q29tcG9uZW50KFBsYXllcik7XG4gICAgICAgICAgICAgICAgY29uc3QgcGxheWVyUmlnaHQ6IFBsYXllciA9IHRoaXMuX3BsYXllclJpZ2h0LmdldENvbXBvbmVudChQbGF5ZXIpO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmICh1bmRlZmluZWQgPT09IHBsYXllckxlZnQudGFyZ2V0ICYmIHVuZGVmaW5lZCA9PT0gcGxheWVyUmlnaHQudGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuX3BsYXllckN1cnJlbnRcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlyc3RCYWxsOiBudW1iZXIgPSBnb2FsVGhpc1R1cm4uZmluZCgobnVtYmVyOiBudW1iZXIpID0+IDAgIT09IG51bWJlciAmJiA4ICE9PSBudW1iZXIpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICgoMCA9PT0gdGhpcy5fcGxheWVyQ3VycmVudCAmJiA4ID4gZmlyc3RCYWxsKSB8fCAoIDEgPT09IHRoaXMuX3BsYXllckN1cnJlbnQgJiYgOCA8IGZpcnN0QmFsbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOW3pueOqeWutui/m+S6huaVtOeQgywg5oiW6ICF5Y+z546p5a626L+b5LqG5Y2K55CDLCDlsLHmmK/lt6bmlbTlj7PljYpcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllckxlZnQudGFyZ2V0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllclJpZ2h0LnRhcmdldCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDlkKbliJnlsLHmmK/lt6bljYrlj7PmlbRcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllckxlZnQudGFyZ2V0ID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllclJpZ2h0LnRhcmdldCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX2ZsYWdzLmdvYWxUaGlzVHVybiA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fcGxheWVyQ3VycmVudCA9IDAgPT09IHRoaXMuX3BsYXllckN1cnJlbnQgPyAxIDogMDtcbiAgICB9XG59IiwiJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgeyB1aSB9IGZyb20gJy4vLi4vdWkvbGF5YU1heFVJJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGxheWVyIGV4dGVuZHMgTGF5YS5TY3JpcHQge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBhdmF0YXI6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIDA6IOaVtFxuICAgICAqIDE6IOiKsVxuICAgICAqL1xuICAgIHByaXZhdGUgX3RhcmdldDogbnVtYmVyO1xuXG4gICAgZ2V0IHRhcmdldCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGFyZ2V0O1xuICAgIH1cblxuICAgIHNldCB0YXJnZXQodmFsOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5fdGFyZ2V0ID0gdmFsO1xuICAgICAgICBjb25zb2xlLmxvZygndGFyZ2V0JywgdmFsKTtcblxuICAgICAgICBpZiAoMCA9PT0gdmFsKSB7XG4gICAgICAgICAgICAvLyAodGhpcy5vd25lci5nZXRDaGlsZEJ5TmFtZSgnY29udGFpbmVyX2JhbGwnKSBhcyBMYXlhLlNwcml0ZSkudGV4dHVyZSA9ICdnYW1lL2JhbGxzL2JhbGxfMDEucG5nJztcbiAgICAgICAgICAgICh0aGlzLm93bmVyLmdldENoaWxkQnlOYW1lKCd0YXJnZXQnKSBhcyBMYXlhLkltYWdlKS5za2luID0gJ2dhbWUvYmFsbHMvYmFsbF8wMS5wbmcnO1xuICAgICAgICB9IGVsc2UgaWYgKDEgPT09IHZhbCkge1xuICAgICAgICAgICAgKHRoaXMub3duZXIuZ2V0Q2hpbGRCeU5hbWUoJ3RhcmdldCcpIGFzIExheWEuSW1hZ2UpLnNraW4gPSAnZ2FtZS9iYWxscy9iYWxsXzA5LnBuZyc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcigpIHsgXG4gICAgICAgIHN1cGVyKCk7XG4gICAgfVxuXG4gICAgb25FbmFibGUoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGVsTmFtZSA9IHRoaXMub3duZXIuZ2V0Q2hpbGRCeU5hbWUoJ25hbWUnKSBhcyBMYXlhLkxhYmVsO1xuICAgICAgICBjb25zdCBlbEF2YXRhciA9IHRoaXMub3duZXIuZ2V0Q2hpbGRCeU5hbWUoJ2F2YXRhcicpIGFzIExheWEuSW1hZ2U7XG5cbiAgICAgICAgY29uc3QgZWxNYXNrID0gbmV3IExheWEuU3ByaXRlKCk7XG5cbiAgICAgICAgLy8g5rOo5oSPLFxiIGFyY1RvIOeahOerr+eCuSAxIOaYr+S4pOerr+eCueS9jee9ruWIh+e6v+eahOS6pOeCuVxuICAgICAgICB2YXIgcGF0aCA9ICBbXG4gICAgICAgICAgICBbXCJtb3ZlVG9cIiwgMTAsIDBdLFxuICAgICAgICAgICAgWydsaW5lVG8nLCA0MCwgMF0sXG4gICAgICAgICAgICBbXCJhcmNUb1wiLCA1MCwgMCwgNTAsIDEwLCAxMF0sXG4gICAgICAgICAgICBbJ2xpbmVUbycsIDUwLCA0MF0sXG4gICAgICAgICAgICBbXCJhcmNUb1wiLCA1MCwgNTAsIDQwLCA1MCwgMTBdLFxuICAgICAgICAgICAgWydsaW5lVG8nLCAxMCwgNTBdLFxuICAgICAgICAgICAgW1wiYXJjVG9cIiwgMCwgNTAsIDAsIDQwLCAxMF0sXG4gICAgICAgICAgICBbJ2xpbmVUbycsIDAsIDEwXSxcbiAgICAgICAgICAgIFtcImFyY1RvXCIsIDAsIDAsIDEwLCAwLCAxMF0sXG4gICAgICAgIF07XG5cbiAgICAgICAgZWxNYXNrLmdyYXBoaWNzLmRyYXdQYXRoKDAsIDAsIHBhdGgsIHsgZmlsbFN0eWxlOiAnI2ZmMDAwMCcgfSk7XG4gICAgICAgIGVsTWFzay5wb3MoMCwgMCk7XG5cbiAgICAgICAgLy8gdGhpcy5vd25lci5hZGRDaGlsZChlbE1hc2spO1xuICAgICAgICBlbEF2YXRhci5tYXNrID0gZWxNYXNrO1xuXG4gICAgICAgIGlmICh0aGlzLmF2YXRhcikge31cbiAgICB9XG59XG4iLCIvKipUaGlzIGNsYXNzIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJ5IExheWFBaXJJREUsIHBsZWFzZSBkbyBub3QgbWFrZSBhbnkgbW9kaWZpY2F0aW9ucy4gKi9cbmltcG9ydCBWaWV3PUxheWEuVmlldztcclxuaW1wb3J0IERpYWxvZz1MYXlhLkRpYWxvZztcclxuaW1wb3J0IFNjZW5lPUxheWEuU2NlbmU7XG5leHBvcnQgbW9kdWxlIHVpLmdhbWUge1xyXG4gICAgZXhwb3J0IGNsYXNzIEdhbWVVSSBleHRlbmRzIExheWEuU2NlbmUge1xyXG5cdFx0cHVibGljIGNvbnRhaW5lcl93YWxsOkxheWEuU3ByaXRlO1xuXHRcdHB1YmxpYyBjb250YWluZXJfaG9sZTpMYXlhLlNwcml0ZTtcblx0XHRwdWJsaWMgY29udGFpbmVyX2dvYWw6TGF5YS5TcHJpdGU7XG4gICAgICAgIGNvbnN0cnVjdG9yKCl7IHN1cGVyKCl9XHJcbiAgICAgICAgY3JlYXRlQ2hpbGRyZW4oKTp2b2lkIHtcclxuICAgICAgICAgICAgc3VwZXIuY3JlYXRlQ2hpbGRyZW4oKTtcclxuICAgICAgICAgICAgdGhpcy5sb2FkU2NlbmUoXCJnYW1lL0dhbWVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZXhwb3J0IGNsYXNzIEhvbGVVSSBleHRlbmRzIExheWEuVmlldyB7XHJcbiAgICAgICAgY29uc3RydWN0b3IoKXsgc3VwZXIoKX1cclxuICAgICAgICBjcmVhdGVDaGlsZHJlbigpOnZvaWQge1xyXG4gICAgICAgICAgICBzdXBlci5jcmVhdGVDaGlsZHJlbigpO1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRTY2VuZShcImdhbWUvSG9sZVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cciJdfQ==
